title: Github Release
summary: Create GitHub Release
description: |
  The Step creates a GitHub release, which you can package and make available for a broader audience to download and use.

  ### Configuring the Step

  1. In the **Personal API token** input, you need to provide a token you generated on GitHub, with `repo/public_repo` scope. You can generate your token [here](https://github.com/settings/tokens/).
  1. Add your GitHub username to the **Username** input.
  1. The **Repository URL** input is populated automatically with an env var which has the value of the repository field of the Settings of your app. 
  1. Fill out your app's release information: 
    * **Tag**: Write the name of your tag here.
    * **Commit**: Write the commit tag here.
    * **Release name**: Write the name of the release here.
    * **Release body**: Write the release body here. 
  1. Select `yes` in the **Draft** input to create a draft release or `no` to create a published one.
  1. Select `yes` in the **Pre-release** input to mark your release as a pre-release or `no` to release it as a full release.
  1. Specify which files to add to your release in the **Files to upload** input. Optionally, you can rename these files if you want to give them a more descriptive name. 
  1. The **GitHub API base URL** is the URL for GitHub's API service. You have to modify this input if you are running an Enterprise GitHub instance. For more information, check out the guide on [How to register a GitHub Enterprise repository](https://discuss.bitrise.io/t/how-to-register-a-github-enterprise-repository/218). 
  1. The **GitHub Upload base url** is the URL for your GitHub upload. You have to modify this if you are running an Enterprise GitHub instance.

  ### Troubleshooting

  If you get a 404 response when running the Step, check your token's scope and validity. 

  ### Useful links

  * [Connecting your GitHub/GitLab/Bitbucket account to Bitrise](https://devcenter.bitrise.io/en/accounts/connecting-to-services/connecting-your-github-gitlab-bitbucket-account-to-bitrise.html)
  * [How to register a GitHub Enterprise repository](https://discuss.bitrise.io/t/how-to-register-a-github-enterprise-repository/218)
  * [Generating a GitHub Personal API token](https://github.com/settings/tokens/)

  ### Related Steps

  * [GitHub Status](https://www.bitrise.io/integrations/steps/github-status)
  * [Git Clone Repository](https://www.bitrise.io/integrations/steps/git-clone)

website: https://github.com/bitrise-steplib/steps-github-release
source_code_url: https://github.com/bitrise-steplib/steps-github-release
support_url: https://github.com/bitrise-steplib/steps-github-release/issues

type_tags:
- deploy

toolkit:
  go:
    package_name: github.com/bitrise-steplib/steps-github-release

inputs:
- api_token: 
  opts:
    title: Personal API token
    summary: Github Personal API token used to access the GitHub API.
    description: |-
      Github Personal API token used to access the GitHub API.

      Create your own token: https://github.com/settings/tokens

      The following scope needs to be enabled for the token:

      - repo/public_repo
    is_required: true
    is_sensitive: true
- username: 
  opts:
    title: Username
    summary: Your Github user name
    description: Your Github user name
    is_required: true
    is_sensitive: true
- repository_url: $GIT_REPOSITORY_URL
  opts:
    title: Repository URL
    summary: Github repository URL
    description: |-
      URL of the Github repository to release.

      Available formats:

      - https://hostname/owner/repository.git
      - git@hostname:owner/repository.git
      - ssh://git@hostname:port/owner/repository.git
    is_required: true
- tag: $BITRISE_GIT_TAG
  opts:
    title: Tag
    summary: The name of the tag.
    is_required: true
- commit: $BITRISE_GIT_COMMIT
  opts:
    title: Commit
    summary: The commit of the tag
    description: |-
      Specifies the commitish value that determines where the Git tag is created from. 
      Can be any branch or commit SHA. 
      Unused if the Git tag already exists. 
      Default: the repository's default branch (usually master).
    is_required: true
- name:
  opts:
    title: Release name
    summary: The name of the release.
    is_required: true
- body:
  opts:
    title: Release body
    summary: The body of the release.
    is_required: true
- draft: "yes"
  opts:
    title: Draft
    summary: If `no` is selected, the release will be published.
    description: |-
      Select `yes` to create a draft (unpublished) release, select `no` to create a published one.
    value_options: 
      - "yes"
      - "no"
    is_required: true
- pre_release: "no"
  opts:
    title: Pre-release
    summary: If 'yes' is selected, the release is identifed as pre-release.
    description: |-
      Specifies whether the release is identified as pre-release or not.
      Select `yes` to identify release as pre-release, select `no` to identify the release as full release.
      Default: `no`.
    value_options:
      - "yes"
      - "no"
    is_required: false
- files_to_upload:
  opts:
    title: Files to upload
    summary: One file path per line to upload to the release assets section.
    description: |-
      One file path per line to upload to the release assets section. Optionally you can use a `|` separator at the end of the path
      to set the uploaded file's name.

      Example to use the file's __original name__:
      
      ```
      $BITRISE_DEPLOY_DIR/app-debug.apk
      $BITRISE_DEPLOY_DIR/app-debug-androidTest.apk
      ```

      Example to use __custom file name__:
      
      ```
      $BITRISE_DEPLOY_DIR/app-debug.apk|mycompany_debug_app.apk
      $BITRISE_DEPLOY_DIR/app-debug-androidTest.apk|mycompany_debug_app_test.apk
      ```
- api_base_url: "https://api.github.com"
  opts:
    title: GitHub API base url
    summary: API URL for GitHub or Github Enterprise.
    description: |-
       The default value is https://api.github.com.
    is_expand: true
    is_required: true
- upload_base_url: "https://uploads.github.com"
  opts:
    title: GitHub Upload base url
    summary: Upload URL for GitHub or Github Enterprise.
    description: |-
      The default value is https://uploads.github.com.
    is_expand: true
    is_required: true